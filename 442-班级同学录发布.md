这个算是自己做出来的第一个稍大些的项目，前前后后也用了不短的时间，先把网址放出来 ^_^

<http://www.448class.com>

设置了访问权限，直接访问的话看到的只能是个首页……所以需要看全站的话，直接在环境下跑源码就行了。

GitHub 地址：<https://github.com/doraemonext/classmates>

安装的话，请导入目录下的 `install.sql` 文件即可，数据库设置在 `config.php` 中，请自行更改，默认管理员用户名密码均为 `admin` 。

======== 以下为开发随笔 ========

一开始想整这个东西，是因为班级群里面嚷嚷着搞一个同学录，最先是一个同学弄出来个电子杂志式的，但是需要不断的收集信息，人工整理，然后我就迸出这么个念头，做一个同学录。念头出来后，开始整理思路，在做这个项目之前，曾经做过一个账单统计的程序，当时做的非常简单，没有任何 ajax，没有自己写任何 js，纯 PHP + Smarty 打造…… 甚至连基本的防注入措施都没有…… 但是这次想做的这个同学录不同，需要各种即时响应，同时需要有一个简单的后台来控制内容，管理用户，另外需要严格的权限控制，因为同学录属于不公开的信息，对于未经过审核的用户不能透漏出任何信息。考虑了不少，就开始……coding了。

考虑到自己美工渣的不行，直接使用成熟的 Twitter Bootstrap 框架，很快，几个比较好看的HTML界面就搭出来了，接下来开始写 PHP，但 js 之类的东西以前只是看到一点点，而这次需要各种功能效果，所以……开始现学现用，不管怎么说，自己想要的功能都做了出来，感觉还是不错的，后来，对于原生态 javascript 写 ajax 已经写得恶心的要吐了……便接触了 jQuery，简洁的编码使我喜欢上了它，于是，将所有 javascript 代码用 jQuery 重写了一遍，由于当时写得还不是很多，很快便重写完毕，各种功能也一一完成。

不得不说，用户登录验证是个很麻烦的东西……密码在传输过程需要加密，在数据库存储也需要加密，而且要保证加密后的密码在传输过程中即使被盗取也不会被轻松破译出原始密码，经过挺长时间的搜索，在知乎上找到了这么个解决方案：js 端收集到密码后进行一次 md5，然后通过 ajax 向服务器请求一个随机 session 字符串，将 md5 处理后的密码加上这个 session 字符串，然后对这个新串再做一次 md5，将得到的这个经过两次 md5 的字符串和刚才从服务器取得的 session 字符串一同发送给服务器；数据库中存放的是对密码进行一次 md5 后的字符串，所以服务器接收到后，直接取数据库中的密码（经过一次 md5）和 js 端发过来的 session 字符串相加，做一次 md5，判断这个串和发送过来的经过两次 md5 的字符串是否相等，如果相等，说明验证通过，否则验证失败。

权限方面，分为了四组权限，分别为禁止访问，等待验证，普通用户，管理用户，具体就不多说了，基本每个需要权限的 .php 开头都会有这个权限判定。

默默的编码了一个月，中间也有过停顿，不过后来管王的一句“同学录做的怎么样了？”让我加快了开发进度（催促就是力量啊= =），然后就……噼里啪啦，开张~
