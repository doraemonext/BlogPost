# C 语言运算符优先级存在的问题

《C专家编程》里面给出了一个平常可能会误用的关于运算符优先级的列表，这里摘抄一下，留做记录（感觉自己会经常犯）：

1. **`.` 的优先级高于 `*`**

	示例：`*p.f`
	误以为的结果：`(*p).f`
	**实际结果：对 `p` 取 `f` 偏移，作为指针，然后进行解除引用操作。等同于 `*(p.f)`**

2. **`[]` 的优先级高于 `*`**

	示例：`int *ap[]`
	误以为的结果：`ap` 是个指向 int 数组的指针，也就是 `int(*ap)[]`
	**实际结果：`ap` 是个元素为 int 指针的数组。等同于 `int *(ap[])`**

3. **函数 `()` 高于 `*`**

	示例：`int *fp()`
	误以为的结果：`fp` 是个函数指针，所指函数返回 `int`，也就是 `int(*fp)()`
	**实际结果：`fp` 是个函数，返回 `int *`。等同于 `int *(fp())`**

4. **`==` 和 `!=` 高于位操作符**

	示例：`(val & mask != 0)`
	误以为的结果：`(val & mask) != 0`
	**实际结果：`val & (mask != 0)`**

5. **`==` 和 `!=` 高于赋值符**

	示例：`c = getchar() != EOF`
	误以为的结果：`(c = getchar()) != EOF`
	**实际结果：`c = (getchar() != EOF)`**
	
6. **算数运算高于移位运算符**[sample-css](media/sample-css.css)

	示例：`msb << 4 + lsb`
	误以为的操作：`(msb << 4) + lsb`
	**实际操作：`msb << (4 + lsb)`**
	
7. **逗号运算符在所有运算符中优先级最低**

	示例：`i = 1, 2`
	误以为的操作：`i = (1, 2)`
	**实际操作：`(i = 1), 2`**
	
一个好的习惯是：**乘法和除法优先级高于加法和减法，在涉及其他的操作符时一律加上括号。**


